(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2823bc32"],{"07e3":function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},"0b76":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container-fluid"},[o("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[o("img",{attrs:{alt:"Meason",src:a("333e"),width:"100"}})]),o("div",{staticClass:"row"},[t._m(0),o("div",{staticClass:"col-lg-9 col-md-8 right-content"},[o("div",{},[o("h3",[t._v("我想表演 - 發佈貼文")]),o("div",{staticClass:"form"},[o("form",{on:{submit:function(t){t.preventDefault()}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[t._m(1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"},{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("title")},attrs:{type:"text",placeholder:"活動標題 / 主辦單位",id:"title",name:"title","data-vv-as":"貼文標題"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}}),t.errors.has("title")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                      "+t._s(t.errors.first("title"))+"\n                    ")]):t._e()])]),o("div",{staticClass:"col-md-12"},[t._m(2),o("div",{staticClass:"input-group mb-3"},[o("div",{staticClass:"input-group-prepend"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.city,expression:"formData.city"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",class:{"is-invalid":t.errors.has("city")},attrs:{id:"city",name:"city","data-vv-as":"所在地區"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.formData,"city",e.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",disabled:""}},[t._v("請選擇")]),o("option",{attrs:{value:"台北市"}},[t._v("台北市")]),o("option",{attrs:{value:"新北市"}},[t._v("新北市")]),o("option",{attrs:{value:"桃園縣"}},[t._v("桃園縣")]),o("option",{attrs:{value:"台中市"}},[t._v("台中市")]),o("option",{attrs:{value:"台南市"}},[t._v("台南市")]),o("option",{attrs:{value:"高雄市"}},[t._v("高雄市")]),o("option",{attrs:{value:"基隆市"}},[t._v("基隆市")]),o("option",{attrs:{value:"新竹縣"}},[t._v("新竹縣")]),o("option",{attrs:{value:"嘉義縣"}},[t._v("嘉義縣")]),o("option",{attrs:{value:"苗栗縣"}},[t._v("苗栗縣")]),o("option",{attrs:{value:"彰化縣"}},[t._v("彰化縣")]),o("option",{attrs:{value:"南投縣"}},[t._v("南投縣")]),o("option",{attrs:{value:"雲林縣"}},[t._v("雲林縣")]),o("option",{attrs:{value:"屏東縣"}},[t._v("屏東縣")]),o("option",{attrs:{value:"宜蘭縣"}},[t._v("宜蘭縣")]),o("option",{attrs:{value:"花蓮縣"}},[t._v("花蓮縣")]),o("option",{attrs:{value:"台東縣"}},[t._v("台東縣")]),o("option",{attrs:{value:"澎湖縣"}},[t._v("澎湖縣")]),o("option",{attrs:{value:"金門縣"}},[t._v("金門縣")])])]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",placeholder:"地點",name:"address","data-vv-as":"地點"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),t.errors.has("city")||t.errors.has("address")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                    "+t._s(t.errors.first("city"))+" "+t._s(t.errors.first("address"))+"\n                  ")]):t._e()]),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[t._m(3),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.show_date,expression:"formData.show_date"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("show_date")},attrs:{type:"text",placeholder:"ex: 日期: 2018/07/04 ~ 07/05；時間: 13:00~18:00",id:"show_date",name:"show_date","data-vv-as":"貼文標題"},domProps:{value:t.formData.show_date},on:{input:function(e){e.target.composing||t.$set(t.formData,"show_date",e.target.value)}}}),t.errors.has("show_date")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                      "+t._s(t.errors.first("show_date"))+"\n                    ")]):t._e()])]),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[t._m(4),o("button",{staticClass:"form-control typeText",class:{"is-invalid":"type"===t.tempDom.errorInput},attrs:{type:"button",id:"type","data-toggle":"modal","data-target":"#show-modal"}},[t.formData.type[0]?t._e():o("span",[t._v("類型選擇")]),o("p",{staticClass:"texts"},t._l(t.formData.type,function(e,a){return o("span",{key:a},[t._v(t._s(e))])}),0)]),"type"===t.tempDom.errorInput?o("p",{staticClass:"text-danger mt-1 small"},[t._v("未選擇樂手")]):t._e()])]),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[t._m(5),o("button",{staticClass:"form-control",class:{"is-invalid":"photo"===t.tempDom.errorInput},attrs:{id:"photos","data-toggle":"modal","data-target":"#upload-img"},on:{click:function(e){t.tempDom.errorInput=null}}},[t.formData.photo?o("article",[o("div",{style:{backgroundImage:"url("+t.formData.photo+")"}}),t._v(" 活動封面\n                      ")]):o("span",[t._v("選擇圖片")])]),"photo"===t.tempDom.errorInput?o("p",{staticClass:"text-danger mt-1 small"},[t._v("未選擇圖片")]):t._e()])]),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[t._m(6),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.bio,expression:"formData.bio"},{name:"validate",rawName:"v-validate",value:"required|max:200",expression:"'required|max:200'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("bio")},attrs:{rows:"10",placeholder:"內文最多 200 字",name:"bio",id:"bio","data-vv-as":"簡介"},domProps:{value:t.formData.bio},on:{input:function(e){e.target.composing||t.$set(t.formData,"bio",e.target.value)}}})]),t.errors.has("bio")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                    "+t._s(t.errors.first("bio"))+"\n                  ")]):t._e()]),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group mb-0"},[t._m(7),o("div",{staticClass:"radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.elseMailOpened,expression:"tempDom.elseMailOpened"}],attrs:{type:"radio",value:"default",id:"elseMail-default"},domProps:{checked:t._q(t.tempDom.elseMailOpened,"default")},on:{change:function(e){return t.$set(t.tempDom,"elseMailOpened","default")}}}),o("label",{attrs:{for:"elseMail-default"}},[t._v("\n                        預設信箱\n                        "),"default"===t.tempDom.elseMailOpened&&t.userData?o("small",{staticClass:"text-secondary"},[t._v("("+t._s(t.userData.email)+")")]):t._e()])]),o("div",{staticClass:"radio d-flex align-items-center"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.elseMailOpened,expression:"tempDom.elseMailOpened"}],attrs:{type:"radio",value:"else",id:"elseMail-else"},domProps:{checked:t._q(t.tempDom.elseMailOpened,"else")},on:{change:function(e){return t.$set(t.tempDom,"elseMailOpened","else")}}}),o("label",{staticClass:"mb-0",attrs:{for:"elseMail-else"}},[t._v("\n                        其他信箱\n                      ")]),"else"===t.tempDom.elseMailOpened?o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.poster_email,expression:"formData.poster_email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control ml-3 animated fadeIn",class:{"is-invalid":t.errors.has("elseMail")},attrs:{type:"email",placeholder:"請填入常用信箱以接收應徵訊息","data-vv-as":"常用信箱",name:"elseMail"},domProps:{value:t.formData.poster_email},on:{input:function(e){e.target.composing||t.$set(t.formData,"poster_email",e.target.value)}}}):t._e()]),t.errors.has("elseMail")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                      "+t._s(t.errors.first("elseMail"))+"\n                    ")]):t._e()])]),o("div",{staticClass:"col-lg-12 d-flex mt-3 align-items-center mb-5"},[o("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.creatPost()}}},[t._v("立即發佈")]),o("small",{staticClass:"ml-3"},[t._v("應徵者訊息將透過電子郵件通知唷 :D")])])])])])])])]),o("div",{staticClass:"modal fade",attrs:{id:"show-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(8),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"row",attrs:{id:"instrumentItem"}},t._l(t.tempDom.filterItem,function(e,a){return o("div",{directives:[{name:"show",rawName:"v-show",value:e,expression:"item"}],key:a,staticClass:"col-md-4 col-sm-4 col-6"},[o("div",{staticClass:"radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.selecttype[a],expression:"tempDom.selecttype[index]"}],attrs:{type:"checkbox",name:"radio",disabled:t.formData.type.length>=2&&!t.tempDom.selecttype[a],id:"radio"+a},domProps:{value:e,checked:Array.isArray(t.tempDom.selecttype[a])?t._i(t.tempDom.selecttype[a],e)>-1:t.tempDom.selecttype[a]},on:{change:function(o){var s=t.tempDom.selecttype[a],r=o.target,i=!!r.checked;if(Array.isArray(s)){var n=e,l=t._i(s,n);r.checked?l<0&&t.$set(t.tempDom.selecttype,a,s.concat([n])):l>-1&&t.$set(t.tempDom.selecttype,a,s.slice(0,l).concat(s.slice(l+1)))}else t.$set(t.tempDom.selecttype,a,i)}}}),o("label",{attrs:{for:"radio"+a}},[t._v("\n                    "+t._s(e)+"\n                  ")])])])}),0),t.formData.type.length>=2?o("p",{staticClass:"text-primary mt-1 small"},[t._v("\n              最多只能選兩項\n            ")]):t._e()]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.tempDom.errorInput=null}}},[t._v("選擇完成")])])])])]),o("div",{staticClass:"modal fade",attrs:{id:"upload-img",tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"false","data-keyboard":"false"}},[o("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-body"},[t._m(9),t._m(10),o("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[o("div",{staticClass:"tab-pane fade show active",attrs:{id:"nav-pic",role:"tabpanel","aria-labelledby":"nav-home-tab"}},[o("div",{staticClass:"row ml-0 mt-3"},t._l(t.tempData.photo,function(e,a){return o("div",{key:a,staticClass:"col-6 col-md-4 pl-0 con"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.photo,expression:"formData.photo"}],attrs:{type:"radio",name:"img-radio",id:"img-option-"+a},domProps:{value:e,checked:t._q(t.formData.photo,e)},on:{change:function(a){return t.$set(t.formData,"photo",e)}}}),o("label",{style:{"background-image":"url("+e+")"},attrs:{for:"img-option-"+a}})])}),0)]),o("div",{staticClass:"tab-pane fade",attrs:{id:"nav-host",role:"tabpanel","aria-labelledby":"nav-profile-tab"}},[o("label",{staticClass:"files",attrs:{for:"file-input"}},[!t.tempDom.imgurl||t.errors.has("photo")?o("img",{staticClass:"select-img",attrs:{src:a("0259"),alt:"音樂封面選擇"}}):o("div",{staticClass:"img-preview"},[o("img",{attrs:{src:t.tempDom.imgurl,id:"scream"}})]),o("input",{directives:[{name:"validate",rawName:"v-validate",value:"size:5000",expression:"'size:5000'"}],attrs:{type:"file",name:"photo",id:"file-input",multiple:"true",accept:"image/*","data-vv-as":"圖片檔案"},on:{change:t.preview}}),t.errors.has("photo")?o("p",{staticClass:"text-danger mt-1 small"},[t._v("\n                    請選擇小於 5MB 的圖片\n                  ")]):t._e()])])])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.uploadImg()}}},[t._v("\n              上傳圖片\n            ")])])])])])],1)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-lg-3 col-md-4 control"},[o("img",{staticClass:"left-menu-bg-img",attrs:{src:a("b9fd"),alt:"玩音樂"}}),o("div",{staticClass:"con"},[o("h2",[t._v("我想表演-發布貼文")]),o("hr"),o("button",{staticClass:"btn btn-outline-light",attrs:{type:"button",onclick:"window.history.back();"}},[o("i",{staticClass:"fas fa-arrow-left"}),t._v(" 返回上頁 ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"title"}},[a("i",{staticClass:"fas fa-music"}),t._v("活動標題"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"city"}},[a("i",{staticClass:"fas fa-music"}),t._v("所在地區"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"show_date"}},[a("i",{staticClass:"fas fa-music"}),t._v("表演期間"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"type"}},[a("i",{staticClass:"fas fa-music"}),t._v("活動類型"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"photos"}},[a("i",{staticClass:"fas fa-music"}),t._v("活動封面"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"bio"}},[a("i",{staticClass:"fas fa-music"}),t._v("展演條件 / 活動說明"),a("b",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"contact"}},[a("i",{staticClass:"fas fa-music"}),t._v("通知信箱")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n              活動類型選擇\n            ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("div",{staticClass:"nav nav-tabs",attrs:{id:"nav-tab",role:"tablist"}},[a("a",{staticClass:"nav-item nav-link active",attrs:{id:"nav-pic-tab","data-toggle":"tab",href:"#nav-pic",role:"tab","aria-controls":"nav-pic","aria-selected":"true"}},[t._v("現有的圖片")]),a("a",{staticClass:"nav-item nav-link",attrs:{id:"nav-host-tab","data-toggle":"tab",href:"#nav-host",role:"tab","aria-controls":"nav-host","aria-selected":"false"}},[t._v("裝置中的圖片")])])])}],r=a("85f2"),i=a.n(r);function n(t,e,a){return e in t?i()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a("34ef"),a("4917"),a("28a5"),a("6b54"),a("c5f6"),a("ac6a");var l=a("8aa5"),c=a.n(l),m=a("1157"),d=a.n(m),p={name:"creatShow",data:function(){return{isLoading:!1,userData:{},formData:{bio:"",title:"",city:"",type:[]},tempDom:{alldataDone:!1,filterItem:["活動表演","公益活動","指導教學","商業表演","其他"],selecttype:[],imgurl:null,tempImg:"",errorInput:"",elseMailOpened:"default"},tempData:{photo:["https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F1.jpg?alt=media&token=6e69c9cd-1c73-4932-a1e5-d11a1646baa6","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F4.jpg?alt=media&token=affdc7ae-4540-46d9-927b-fff7aec4d40b","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F5.jpg?alt=media&token=9700dcb4-8ee6-4758-bb93-18410344f94b","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F6.jpg?alt=media&token=df5d1da3-cb40-41c1-81c3-ec2d1768a688","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F7.jpg?alt=media&token=8565624a-0ccc-4c70-ae05-12c7926cae3d","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F8.jpg?alt=media&token=e14031c9-44d7-4d3d-b3ec-c22d11aace09","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F9.jpg?alt=media&token=2d73919b-4da4-4fc4-800e-be3a1da8beca","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F10.jpg?alt=media&token=d49e932d-e3e6-45de-9f0c-1bc79d209400","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F11.jpg?alt=media&token=14c4b5fa-87d6-4528-af74-d354fd7c1504","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F12.jpg?alt=media&token=b25d5b6f-603f-46bb-ade0-c2624f241459","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F15.jpg?alt=media&token=80f80646-ca80-44e4-8f70-ca8d2a32e54e","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F16.jpg?alt=media&token=e9579979-4b8b-4e78-81bd-8ba10d8b77bd","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F17.jpg?alt=media&token=476f544e-afec-4933-895c-81f370b3990a","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F18.jpg?alt=media&token=86a09d8f-7120-48eb-b81a-3f2685fa2383","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F13.jpg?alt=media&token=87ec4e49-c076-47c9-a2a3-b4110d171bf0","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F14.jpg?alt=media&token=674e5da0-3693-4fbe-9bb9-16280c3ca17b","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F2.jpg?alt=media&token=87a34eaa-1c8b-4d12-845a-e9041b787401","https://firebasestorage.googleapis.com/v0/b/meason-music.appspot.com/o/default_photo%2F3.jpg?alt=media&token=d3f1a26d-d001-4afc-a142-fa7e3e5ad62a"],options:["活動表演","公益活動","指導教學","商業表演","其他"]},errorMsg:""}},watch:{"tempDom.selecttype":{handler:function(t){var e=this;e.formData.type=[],t.forEach(function(t,a){t&&e.formData.type.push(e.tempData.options[a])})}},"formData.bio":{handler:function(t){var e=document.getElementById("bio"),a=e.clientHeight;a=Math.max(e.scrollHeight,a),a>e.clientHeight&&(e.style.height=a+"px")}}},methods:{preview:function(t){var e=this,a=t.target.files[0];e.tempDom.imgurl=URL.createObjectURL(a)},cvs:function(){var t,e=this,a=400,o=document.createElement("canvas"),s=new Image,r=o.getContext("2d"),i=d()("#scream"),n=i.height(),l=i.width(),c=a*n/l;return s.src=e.tempDom.imgurl,o.width=a,o.height=c,r.clearRect(0,0,a,c),r.drawImage(s,0,0,a,c),t=o.toDataURL("image/jpeg",.9),t},uploadImg:function(){var t=this;if(t.isLoading=!0,t.formData.photo)d()("#upload-img").modal("hide"),t.isLoading=!1;else{var e=Number(new Date),a=e.toString()+t.userData.uid,o=c.a.storage().ref("show_photo/"+a),s=t.dataURLtoFile(t.cvs(),"fileName");o.put(s).then(function(e){e.ref.getDownloadURL().then(function(e){t.formData.photo=e,d()("#upload-img").modal("hide"),t.isLoading=!1})})}},dataURLtoFile:function(t,e){var a=t.split(","),o=a[0].match(/:(.*?);/)[1],s=atob(a[1]),r=s.length,i=new Uint8Array(r);while(r--)i[r]=s.charCodeAt(r);return new File([i],e,{type:o})},getUserData:function(){var t=this,e="".concat("http://127.0.0.1:3000","/getData");c.a.auth().onAuthStateChanged(function(a){a?t.$http.post(e,{url:"users/".concat(a.uid,"/basic/")}).then(function(e){t.userData=e.data,t.userData.uid=a.uid}):t.userData=null})},creatPost:function(){var t=this;this.$validator.validate().then(function(e){e?t.formData.type[0]?t.formData.photo?(t.tempDom.alldataDone=!0,t.userData?t.sendPostAPI():(alert("會員登入狀況出現錯誤，請重新登入"),t.$router.push("/show"))):t.tempDom.errorInput="photo":t.tempDom.errorInput="type":console.log("欄位不完整")})},sendPostAPI:function(){var t,e=this;e.isLoading=!0;var a="".concat("http://127.0.0.1:3000","/creatShow"),o=new Date,s=(t={bio:e.formData.bio,date:"".concat(o.getFullYear(),"-").concat(o.getMonth()+1,"-").concat(o.getDate()),timestamp:Date.now(),display:!0,legal:!0,type:e.formData.type,picURL:e.formData.photo,poster_email:e.formData.poster_email,poster_uid:e.userData.uid,title:e.formData.title},n(t,"type",e.formData.type),n(t,"city",e.formData.city),n(t,"uid",""),n(t,"show_date",e.formData.show_date),t);"default"===e.tempDom.elseMailOpened&&(s.poster_email=e.userData.email),this.$http.post(a,{formData:s}).then(function(t){e.isLoading=!1,e.$router.push("/show")}).catch(function(t){console.error("寫入錯誤",t),alert("發佈失敗，請稍後再重試，或聯繫迷聲客服中心"),e.isLoading=!1})}},created:function(){var t=this;t.getUserData(),window.onbeforeunload=function(t){t.returnValue="確定要離開嗎？系統不會保存目前內容"}},beforeRouteLeave:function(t,e,a){if(this.tempDom.alldataDone)a();else{var o=window.confirm("確定要離開嗎？系統不會保存目前內容");o?a():a(!1)}}},u=p,f=(a("182a"),a("2877")),v=Object(f["a"])(u,o,s,!1,null,"9c4af4ca",null);e["default"]=v.exports},"182a":function(t,e,a){"use strict";var o=a("1ee6"),s=a.n(o);s.a},"1bc3":function(t,e,a){var o=a("f772");t.exports=function(t,e){if(!o(t))return t;var a,s;if(e&&"function"==typeof(a=t.toString)&&!o(s=a.call(t)))return s;if("function"==typeof(a=t.valueOf)&&!o(s=a.call(t)))return s;if(!e&&"function"==typeof(a=t.toString)&&!o(s=a.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,a){var o=a("f772"),s=a("e53d").document,r=o(s)&&o(s.createElement);t.exports=function(t){return r?s.createElement(t):{}}},"1ee6":function(t,e,a){},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"35e8":function(t,e,a){var o=a("d9f6"),s=a("aebd");t.exports=a("8e60")?function(t,e,a){return o.f(t,e,s(1,a))}:function(t,e,a){return t[e]=a,t}},"454f":function(t,e,a){a("46a7");var o=a("584a").Object;t.exports=function(t,e,a){return o.defineProperty(t,e,a)}},"46a7":function(t,e,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"584a":function(t,e){var a=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=a)},"63b6":function(t,e,a){var o=a("e53d"),s=a("584a"),r=a("d864"),i=a("35e8"),n=a("07e3"),l="prototype",c=function(t,e,a){var m,d,p,u=t&c.F,f=t&c.G,v=t&c.S,h=t&c.P,g=t&c.B,b=t&c.W,_=f?s:s[e]||(s[e]={}),D=_[l],y=f?o:v?o[e]:(o[e]||{})[l];for(m in f&&(a=e),a)d=!u&&y&&void 0!==y[m],d&&n(_,m)||(p=d?y[m]:a[m],_[m]=f&&"function"!=typeof y[m]?a[m]:g&&d?r(p,o):b&&y[m]==p?function(t){var e=function(e,a,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,o)}return t.apply(this,arguments)};return e[l]=t[l],e}(p):h&&"function"==typeof p?r(Function.call,p):p,h&&((_.virtual||(_.virtual={}))[m]=p,t&c.R&&D&&!D[m]&&i(D,m,p)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"794b":function(t,e,a){t.exports=!a("8e60")&&!a("294c")(function(){return 7!=Object.defineProperty(a("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"85f2":function(t,e,a){t.exports=a("454f")},"8e60":function(t,e,a){t.exports=!a("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},d864:function(t,e,a){var o=a("79aa");t.exports=function(t,e,a){if(o(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,o){return t.call(e,a,o)};case 3:return function(a,o,s){return t.call(e,a,o,s)}}return function(){return t.apply(e,arguments)}}},d9f6:function(t,e,a){var o=a("e4ae"),s=a("794b"),r=a("1bc3"),i=Object.defineProperty;e.f=a("8e60")?Object.defineProperty:function(t,e,a){if(o(t),e=r(e,!0),o(a),s)try{return i(t,e,a)}catch(n){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},e4ae:function(t,e,a){var o=a("f772");t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}}}]);
//# sourceMappingURL=chunk-2823bc32.9c40adda.js.map