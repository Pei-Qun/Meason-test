(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-429043ed","chunk-5ace5021"],{"065a":function(t,e,a){"use strict";var i=a("5456"),n=a.n(i);n.a},"0ce6":function(t,e,a){},1057:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAYAAAB50g0VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5NUNBREI4QjVBODExRTk5QTZBOTgwMUYxQTRBODA4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5NUNBREI5QjVBODExRTk5QTZBOTgwMUYxQTRBODA4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTk1Q0FEQjZCNUE4MTFFOTlBNkE5ODAxRjFBNEE4MDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTk1Q0FEQjdCNUE4MTFFOTlBNkE5ODAxRjFBNEE4MDgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5DtXUFAAAALklEQVR42uzOMQEAAAgDILV/59nA2wMS0Enqs6nnBAUFBQUFBQUFBQUFBQ8rwACRXQMrSS2EtwAAAABJRU5ErkJggg=="},5118:function(t,e,a){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new s(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},5125:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"music"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"user-title mt-5"},[a("h2",[a("i",{staticClass:"fas fa-compact-disc"}),a("router-link",{attrs:{to:"/music/all"}},[t._v(" 所有音樂")]),t.userData?a("span",[t._v(" / ")]):t._e(),t.userData?a("router-link",{attrs:{to:"/music/loveSong"}},[t._v("收藏音樂")]):t._e()],1),a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button","data-toggle":"modal","data-target":"#filter-modal"}},[t._v("分類篩選")])])])]),t.userData?a("router-view",{attrs:{userData:t.userData}}):a("Area")],1)])},n=[],s=a("8aa5"),o=a.n(s),l=(a("1157"),a("ab20")),c={name:"Music",data:function(){return{userData:null}},methods:{getUserData:function(){var t=this,e="".concat("https://glacial-bayou-94392.herokuapp.com","/getData");o.a.auth().onAuthStateChanged(function(a){a?t.$http.post(e,{url:"users/".concat(a.uid,"/basic/")}).then(function(e){t.userData=e.data}):t.userData=null})}},components:{Area:l["default"]},created:function(){var t=this;t.getUserData()}},r=c,u=(a("61a9"),a("2877")),d=Object(u["a"])(r,i,n,!1,null,"6c77108d",null);e["default"]=d.exports},5456:function(t,e,a){},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var i,n=1,s={},o=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?p():f()?v():t.MessageChannel?h():l&&"onreadystatechange"in l.createElement("script")?g():b(),c.setImmediate=r,c.clearImmediate=u}function r(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var o={callback:t,args:e};return s[n]=o,i(n),n++}function u(t){delete s[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(a,i);break}}function m(t){if(o)setTimeout(m,0,t);else{var e=s[t];if(e){o=!0;try{d(e)}finally{u(t),o=!1}}}}function p(){i=function(t){e.nextTick(function(){m(t)})}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function v(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&m(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(a){t.postMessage(e+a,"*")}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},i=function(e){t.port2.postMessage(e)}}function g(){var t=l.documentElement;i=function(e){var a=l.createElement("script");a.onreadystatechange=function(){m(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function b(){i=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("f28c"))},"61a9":function(t,e,a){"use strict";var i=a("0ce6"),n=a.n(i);n.a},ab20:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row music-scrollCon"},[t.dom.login?i("Login"):t._e(),i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[i("img",{attrs:{alt:"Meason",src:a("333e"),width:"100"}})]),t._l(t.songList,function(e,n){return i("div",{key:e.id+n,staticClass:"col-xl-3 col-lg-3 col-md-4 col-sm-6"},[t.userData?i("a",{staticClass:"song-likes",attrs:{href:"#",title:"加入最愛"},domProps:{innerHTML:t._s(t.comLike(e.like))},on:{click:function(a){return a.preventDefault(),t.liked(e,n)}}}):i("a",{staticClass:"song-likes",attrs:{href:"#",title:"加入最愛"},on:{click:function(e){e.preventDefault(),t.dom.login=!0,t.dom.opened=!1}}},[i("i",{staticClass:"far fa-heart"})]),i("div",{staticClass:"music-con"},[i("div",{staticClass:"photo",class:{playing:t.player.id===e.id},style:{backgroundImage:"url("+e.cover+")"},on:{click:function(e){return t.togglePlay(n)}}},[i("img",{attrs:{src:a("1057"),width:"100%",alt:""}}),t._m(0,!0),i("p",{staticClass:"views"},[t._v(t._s(e.view)+" "),i("small",[t._v("瀏覽")])])]),i("div",{staticClass:"text"},[i("router-link",{attrs:{to:"/music/"+e.id,tag:"h3"}},[t._v(t._s(e.name))]),i("h4",{staticClass:"type"},[i("i",{staticClass:"fas fa-music"}),i("p",{staticClass:"type"},t._l(e.type,function(e){return i("span",{key:e},[t._v(t._s(e))])}),0)])],1),i("div",{staticClass:"artist"},[i("router-link",{attrs:{to:"/user",title:e.artist}},[i("i",{staticClass:"fas fa-user"}),t._v(" "+t._s(e.artist)+"\n        ")]),e.like?i("span",[t._v(t._s(e.like.length)+" 收藏")]):t._e()],1)])])}),i("div",{staticClass:"modal fade",attrs:{id:"filter-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[t._m(1),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"input-group mb-3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.filterInput,expression:"tempDom.filterInput"}],staticClass:"form-control",attrs:{type:"text",placeholder:"♫ Search","aria-label":"","aria-describedby":"basic-addon1"},domProps:{value:t.tempDom.filterInput},on:{input:function(e){e.target.composing||t.$set(t.tempDom,"filterInput",e.target.value)}}})])])]),i("div",{staticClass:"row",attrs:{id:"instrumentItem"}},t._l(t.tempDom.filterItem,function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:e,expression:"item"}],key:a,staticClass:"col-md-4 col-sm-4 col-6"},[i("div",{staticClass:"radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.selectType,expression:"tempDom.selectType"}],attrs:{type:"radio",name:"radio",id:"radio"+a},domProps:{value:e,checked:t._q(t.tempDom.selectType,e)},on:{change:function(a){return t.$set(t.tempDom,"selectType",e)}}}),i("label",{attrs:{for:"radio"+a}},[t._v("\n                  "+t._s(e)+"\n                ")])])])}),0)]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.filterData()}}},[t._v("確定")])])])])])],2)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"click"},[a("i",{staticClass:"far fa-play-circle"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("快速篩選")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],s=(a("8615"),a("456d"),a("ac6a"),a("8aa5"),a("1157")),o=a.n(s),l=a("578a"),c=(a("5118"),{name:"AllSong",props:["userData"],data:function(){return{isLoading:!1,dom:{login:!1,opened:!1},player:{id:"",pause:!1},songList:[],tempDom:{deleteOpen:!1,filterInput:"",filterItem:["全部","編曲/作詞","COVER","搖滾","貝斯手","電子琴手","提琴樂手","電吉他手","木吉他手","爵士鼓手","鋼琴手","木箱鼓手","DJ","B-BOX夥伴","阿卡貝拉夥伴","長笛手","薩克斯風樂手","木管樂手","銅管樂手(法國號,小號,低音大號,長號等)","吹管類樂手(笛,蕭,嗩吶,笙)","彈拔類樂手(琵琶,箏,揚琴,中阮)","拉弦類樂手(胡)","打擊鼓手(大鼓,小軍鼓)","其他"]},tempData:{allData:[],firstPlay:!0,options:["全部","編曲/作詞","COVER","搖滾","貝斯手","電子琴手","提琴樂手","電吉他手","木吉他手","爵士鼓手","鋼琴手","木箱鼓手","DJ","B-BOX夥伴","阿卡貝拉夥伴","長笛手","薩克斯風樂手","木管樂手","銅管樂手(法國號,小號,低音大號,長號等)","吹管類樂手(笛,蕭,嗩吶,笙)","彈拔類樂手(琵琶,箏,揚琴,中阮)","拉弦類樂手(胡)","打擊鼓手(大鼓,小軍鼓)","其他"]}}},watch:{"tempDom.filterInput":{handler:function(t){var e=this;e.tempDom.filterItem=e.tempData.options.map(function(e,a,i){return-1!==e.indexOf(t)&&e})}}},components:{Login:l["a"]},methods:{togglePlay:function(t){var e=this,a=[];e.player.pause&&e.songList[t].id===e.player.id?(this.$bus.$emit("audio:pause"),e.player.pause=!1,e.player.id=""):e.tempData.firstPlay?(e.songList.forEach(function(t){a.push(t)}),a.unshift(e.songList[t]),a.splice(t+1,1),this.$bus.$emit("audio:list",a),e.player.pause=!0,e.tempData.firstPlay=!1):(this.$bus.$emit("audio:play",e.songList[t]),e.player.pause=!0)},getMusicData:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this),a="".concat("https://glacial-bayou-94392.herokuapp.com","/getPostData"),i="/music",n=null;e.isLoading=!0,e.$http.post(a,{url:i}).then(function(t){n=t.data,e.isLoading=!1}).then(function(t){n.forEach(function(t){t.like&&(t.like=Object.keys(t.like))})}).then(function(t){n.forEach(function(t){t.type&&(t.type=Object.values(t.type))})}).then(function(){t.$bus.$emit("audio:newList",n),e.tempData.allData=n,e.tempDom.selectType?e.filterData():e.songList=n}).catch(function(t){e.isLoading=!1})},comLike:function(t){var e=this,a=e.userData.uid,i="";return i=Array.isArray(t)&&-1!==t.indexOf(a)?'<i class="fas fa-heart"></i>':'<i class="far fa-heart"></i>',i},liked:function(t,e){var a=this,i=a.userData.uid;a.userData&&(t.like&&-1!==t.like.indexOf(i)?a.sendLikeAPI(t,"unlike"):a.sendLikeAPI(t,"likes"))},sendLikeAPI:function(t,e){var a=this,i="".concat("https://glacial-bayou-94392.herokuapp.com","/likeMusic"),n={method:e,userId:a.userData.uid,musicId:t.id,posterId:t.poster_uid};a.$http.post(i,{reqData:n}).then(function(t){t.data.success&&a.getMusicData()})},scrollEvent:function(){var t=document.querySelector(".music").scrollTop,e=o()(".music").height()||document.body.clientHeight,a=parseInt(t+e),i=parseInt(o()(".music-scrollCon").height(),10)+71;a===i&&console.log(a,i)},filterData:function(){var t=this;if("全部"!==t.tempDom.selectType){var e=t.tempData.allData.filter(function(e){return t.ArrIndexOf(e.type)});t.songList=e}else t.songList=t.tempData.allData},ArrIndexOf:function(t){var e=this;return-1!==t.indexOf(e.tempDom.selectType)}},created:function(){var t=this;t.getMusicData(),t.$bus.$on("current:id",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.player.id=e}),t.$bus.$on("current:pause",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.player.id="",t.player.pause=!1}),t.$bus.$on("close:login",function(e){t.dom.login=e}),t.$bus.$on("add:view",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.songList.forEach(function(a,i){a.id===e.id&&(t.songList[i].view=e.num)})})}}),r=c,u=(a("065a"),a("2877")),d=Object(u["a"])(r,i,n,!1,null,"57bbe627",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-429043ed.9ed35aca.js.map