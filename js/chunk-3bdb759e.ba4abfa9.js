(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bdb759e"],{"347e":function(t,a,e){},e161:function(t,a,e){"use strict";var s=e("347e"),i=e.n(s);i.a},ea15:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[s("img",{attrs:{alt:"Meason",src:e("333e"),width:"100"}})]),t._m(0),s("div",{staticClass:"row form"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"photo "},[s("div",{staticClass:"pic",style:{backgroundImage:"url("+t.fackUserDara.photoURL+")"}}),s("p",{staticClass:"text-info",attrs:{"data-toggle":"modal","data-target":"#upload-img"}},[t._v("更換頭貼")])]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="displayName"}}},[s("i",{staticClass:"fas fa-music"}),t._v("個人暱稱")]),"displayName"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="displayName"}}},[t._v("\n          "+t._s(t.fackUserDara.displayName)+"\n          "),t._m(1)]):t._e(),"displayName"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fackUserDara.displayName,expression:"fackUserDara.displayName"},{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("displayName")},attrs:{type:"text",placeholder:"請輸入暱稱",id:"displayName",name:"displayName","data-vv-as":"暱稱"},domProps:{value:t.fackUserDara.displayName},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveChange("displayName")},input:function(a){a.target.composing||t.$set(t.fackUserDara,"displayName",a.target.value)}}}),t.errors.has("displayName")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("displayName"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[t._m(2),s("p",{staticClass:"defalt-data no-pointer"},[t._v(t._s(t.fackUserDara.uid))])]),s("div",{staticClass:"form-group"},[t._m(3),s("p",{staticClass:"defalt-data no-pointer"},[t._v(t._s(t.fackUserDara.email))])])]),t._m(4),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="gender"}}},[s("i",{staticClass:"fas fa-music"}),t._v("性別\n        ")]),"gender"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="gender"}}},[t.detail.gender?s("span",[t._v(t._s(t.detail.gender))]):s("span",[t._v("暫無資料")]),t._m(5)]):t._e(),"gender"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.detail.gender,expression:"detail.gender"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.detail,"gender",a.target.multiple?e:e[0])}}},[s("option",[t._v("男性")]),s("option",[t._v("女性")]),s("option",[t._v("秘密")])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.saveChange("gender")}}},[t._v("儲存\n            ")])]),t.errors.has("gender")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("gender"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="city"}}},[s("i",{staticClass:"fas fa-music"}),t._v("現居城市\n        ")]),"city"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="city"}}},[t.detail.city?s("span",[t._v(t._s(t.detail.city))]):s("span",[t._v("暫無資料")]),t._m(6)]):t._e(),"city"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.detail.city,expression:"detail.city"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.detail,"city",a.target.multiple?e:e[0])}}},[s("option",[t._v("台北市")]),s("option",[t._v("新北市")]),s("option",[t._v("桃園縣")]),s("option",[t._v("台中市")]),s("option",[t._v("台南市")]),s("option",[t._v("高雄市")]),s("option",[t._v("基隆市")]),s("option",[t._v("新竹縣")]),s("option",[t._v("嘉義縣")]),s("option",[t._v("苗栗縣")]),s("option",[t._v("彰化縣")]),s("option",[t._v("南投縣")]),s("option",[t._v("雲林縣")]),s("option",[t._v("屏東縣")]),s("option",[t._v("宜蘭縣")]),s("option",[t._v("花蓮縣")]),s("option",[t._v("台東縣")]),s("option",[t._v("澎湖縣")]),s("option",[t._v("金門縣")])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.saveChange("city")}}},[t._v("儲存\n            ")])]),t.errors.has("city")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("city"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="birth"}}},[s("i",{staticClass:"fas fa-music"}),t._v("年齡\n        ")]),"birth"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="birth"}}},[t.detail.birth?s("span",[t._v(t._s(t.detail.birth))]):s("span",[t._v("暫無資料")]),t._m(7)]):t._e(),"birth"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.detail.birth,expression:"detail.birth"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.detail,"birth",a.target.multiple?e:e[0])}}},[s("option",[t._v("10 歲以下")]),s("option",[t._v("11 ~ 15 歲")]),s("option",[t._v("16 ~ 20 歲")]),s("option",[t._v("21 ~ 25 歲")]),s("option",[t._v("26 ~ 30 歲")]),s("option",[t._v("31 ~ 35 歲")]),s("option",[t._v("36 ~ 40 歲")]),s("option",[t._v("41 ~ 45 歲")]),s("option",[t._v("45 ~ 50 歲")]),s("option",[t._v("50 歲以上")])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.saveChange("birth")}}},[t._v("儲存\n            ")])]),t.errors.has("birth")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("birth"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="job"}}},[s("i",{staticClass:"fas fa-music"}),t._v("現在任職\n        ")]),"job"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="job"}}},[t.detail.job?s("span",[t._v(t._s(t.detail.job))]):s("span",[t._v("暫無資料")]),t._m(8)]):t._e(),"job"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.job,expression:"detail.job"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("job")},attrs:{type:"text",placeholder:"例如: 學生、研究生、職員等",id:"job",name:"job","data-vv-as":"任職"},domProps:{value:t.detail.job},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveChange("job")},input:function(a){a.target.composing||t.$set(t.detail,"job",a.target.value)}}}),t.errors.has("job")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("job"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="talent"}}},[s("i",{staticClass:"fas fa-music"}),t._v("音樂專長\n        ")]),"talent"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="talent"}}},[t.detail.talent?s("span",[t._v(t._s(t.detail.talent))]):s("span",[t._v("暫無資料")]),t._m(9)]):t._e(),"talent"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.talent,expression:"detail.talent"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("talent")},attrs:{type:"text",placeholder:"例如: 彈吉他、電子琴等",id:"talent",name:"talent","data-vv-as":"音樂專長"},domProps:{value:t.detail.talent},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveChange("talent")},input:function(a){a.target.composing||t.$set(t.detail,"talent",a.target.value)}}}),t.errors.has("talent")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("talent"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="style"}}},[s("i",{staticClass:"fas fa-music"}),t._v("曲風\n        ")]),"style"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="style"}}},[t.detail.style?s("span",[t._v(t._s(t.detail.style))]):s("span",[t._v("暫無資料")]),t._m(10)]):t._e(),"style"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.style,expression:"detail.style"},{name:"validate",rawName:"v-validate",value:"max:30",expression:"'max:30'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("style")},attrs:{type:"text",placeholder:"例如: 金屬、抒情等",id:"style",name:"style","data-vv-as":"曲風"},domProps:{value:t.detail.style},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveChange("style")},input:function(a){a.target.composing||t.$set(t.detail,"style",a.target.value)}}}),t.errors.has("style")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("style"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="bio"}}},[s("i",{staticClass:"fas fa-music"}),t._v("自我簡介\n        ")]),"bio"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="bio"}}},[t.detail.bio?s("pre",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:t._s(t.detail.bio)}}):s("span",[t._v("暫無資料")]),t._m(11)]):t._e(),"bio"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detail.bio,expression:"detail.bio"},{name:"validate",rawName:"v-validate",value:"max:200",expression:"'max:200'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("bio")},attrs:{type:"text",placeholder:"例如: 對音樂的熱忱、入圈多久等",id:"bio",name:"bio","data-vv-as":"簡介"},domProps:{value:t.detail.bio},on:{input:function(a){a.target.composing||t.$set(t.detail,"bio",a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.saveChange("bio")}}},[t._v("儲存\n            ")])]),t.errors.has("bio")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("bio"))+"\n          ")]):t._e()]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{on:{click:function(a){t.tempDom.editInput="contact"}}},[s("i",{staticClass:"fas fa-music"}),t._v("聯絡方式\n        ")]),"contact"!==t.tempDom.editInput?s("p",{staticClass:"defalt-data",on:{click:function(a){t.tempDom.editInput="contact"}}},[t.detail.contact?s("pre",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:t._s(t.detail.contact)}}):s("span",[t._v("暫無資料")]),t._m(12)]):t._e(),"contact"===t.tempDom.editInput?s("div",{staticClass:"d-flex"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detail.contact,expression:"detail.contact"},{name:"validate",rawName:"v-validate",value:"max:200",expression:"'max:200'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("contact")},attrs:{type:"text",placeholder:"例如: facebook、instagram",id:"contact",name:"contact","data-vv-as":"聯絡資料"},domProps:{value:t.detail.contact},on:{input:function(a){a.target.composing||t.$set(t.detail,"contact",a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.saveChange("contact")}}},[t._v("儲存\n            ")])]),t.errors.has("contact")?s("p",{staticClass:"text-danger mt-1 small ml-2"},[t._v("\n            "+t._s(t.errors.first("contact"))+"\n          ")]):t._e()]):t._e()])])]),s("div",{staticClass:"modal fade",attrs:{id:"upload-img",tabindex:"-1",role:"dialog","aria-hidden":"true","data-backdrop":"false","data-keyboard":"false"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(13),s("div",{staticClass:"modal-body"},[s("label",{staticClass:"files",attrs:{for:"file-input"}},[!t.tempDom.imgurl||t.errors.has("photo")?s("img",{staticClass:"select-img",attrs:{src:e("0259"),alt:"頭貼選擇"}}):s("div",{staticClass:"img-preview"},[s("img",{attrs:{src:t.tempDom.imgurl,id:"scream"}})]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"size:5000|ext:jpg,png",expression:"'size:5000|ext:jpg,png'"}],attrs:{type:"file",name:"photo",id:"file-input",multiple:"true",accept:"image/*","data-vv-as":"圖片檔案"},on:{change:t.preview}}),t.errors.has("photo")?s("p",{staticClass:"text-danger mt-1 small"},[t._v("\n              請選擇小於 5MB 的圖片\n            ")]):t._e()])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.errors.has("photo")},on:{click:function(a){return t.uploadImg()}}},[t._v("\n            上傳圖片\n          ")])])])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"user-title"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button",onclick:"window.history.back();"}},[e("i",{staticClass:"fas fa-arrow-left"})]),e("h2",[e("i",{staticClass:"fas fa-user-cog"}),t._v(" 編輯帳號")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"nn"},[e("i",{staticClass:"fas fa-music"}),t._v("帳號編號")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"nn"},[e("i",{staticClass:"fas fa-music"}),t._v("帳號信箱")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"title"},[t._v("詳細資料編輯")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"edit-btn"},[e("i",{staticClass:"fas fa-pen"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("\n            選擇頭貼\n          ")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],n=(e("34ef"),e("4917"),e("28a5"),e("6b54"),e("c5f6"),e("8aa5")),o=e.n(n),l=e("1157"),r=e.n(l),c={props:["userData","detail"],data:function(){return{isLoading:!1,fackUserDara:{},tempDom:{editInput:"",uploading:""}}},watch:{"detail.bio":{handler:function(t){var a=document.getElementById("bio"),e=a.clientHeight;e=Math.max(a.scrollHeight,e),e>a.clientHeight&&(a.style.height=e+"px")}}},methods:{preview:function(t){var a=this,e=t.target.files[0];a.tempDom.imgurl=URL.createObjectURL(e)},cvs:function(){var t,a=this,e=600,s=document.createElement("canvas"),i=new Image,n=s.getContext("2d"),o=r()("#scream"),l=o.height(),c=o.width(),d=e*l/c;return i.src=a.tempDom.imgurl,s.width=e,s.height=d,n.clearRect(0,0,e,d),n.drawImage(i,0,0,e,d),t=s.toDataURL("image/jpeg",1),t},uploadImg:function(){var t=this;t.isLoading=!0;var a=Number(new Date),e=a.toString()+t.userData.uid,s=o.a.storage().ref("user_photo/"+e),i=t.dataURLtoFile(t.cvs(),"fileName");s.put(i).then(function(a){a.ref.getDownloadURL().then(function(a){t.uploadImgData(a)})}).catch(function(t){alert("上傳失敗，請重新整理後重試"),console.log(t)})},dataURLtoFile:function(t,a){var e=t.split(","),s=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,o=new Uint8Array(n);while(n--)o[n]=i.charCodeAt(n);return new File([o],a,{type:s})},saveChange:function(t){var a=this,e="".concat("https://glacial-bayou-94392.herokuapp.com","/editAccountData"),s={path:"detail",item:t,val:a.detail[t],uid:a.userData.uid};"displayName"===a.tempDom.editInput&&(s.path="basic",s.val=a.fackUserDara.displayName),this.$validator.validate().then(function(t){t&&a.$http.post(e,{reqData:s}).then(function(t){"displayName"===a.tempDom.editInput&&window.location.reload(!0),a.tempDom.editInput=""}).catch(function(t){alert("更新失敗，建議重新整理後重試")})})},getUserDetail:function(t){var a=this,e="".concat("https://glacial-bayou-94392.herokuapp.com","/getData");a.$http.post(e,{url:"users/".concat(t.uid,"/detail/")}).then(function(t){t.data&&(a.detail=t.data)})},uploadImgData:function(t){var a=this,e="".concat("https://glacial-bayou-94392.herokuapp.com","/editAccountData"),s={path:"basic",item:"photoURL",val:t,uid:a.userData.uid};a.$http.post(e,{reqData:s}).then(function(t){window.location.reload(!0)}).catch(function(t){alert("更新失敗，建議重新整理後重試")})}},created:function(){var t=this;t.fackUserDara=Object.assign({},t.userData)}},d=c,p=(e("e161"),e("2877")),m=Object(p["a"])(d,s,i,!1,null,"d5cfd116",null);a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-3bdb759e.ba4abfa9.js.map