(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ace5021"],{"065a":function(t,e,i){"use strict";var a=i("5456"),n=i.n(a);n.a},1057:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAYAAAB50g0VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5NUNBREI4QjVBODExRTk5QTZBOTgwMUYxQTRBODA4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5NUNBREI5QjVBODExRTk5QTZBOTgwMUYxQTRBODA4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTk1Q0FEQjZCNUE4MTFFOTlBNkE5ODAxRjFBNEE4MDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTk1Q0FEQjdCNUE4MTFFOTlBNkE5ODAxRjFBNEE4MDgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5DtXUFAAAALklEQVR42uzOMQEAAAgDILV/59nA2wMS0Enqs6nnBAUFBQUFBQUFBQUFBQ8rwACRXQMrSS2EtwAAAABJRU5ErkJggg=="},5118:function(t,e,i){(function(t){var a="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(n.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new s(n.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i("c8ba"))},5456:function(t,e,i){},6017:function(t,e,i){(function(t,e){(function(t,i){"use strict";if(!t.setImmediate){var a,n=1,s={},o=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?p():f()?g():t.MessageChannel?v():l&&"onreadystatechange"in l.createElement("script")?h():y(),c.setImmediate=r,c.clearImmediate=u}function r(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return s[n]=o,a(n),n++}function u(t){delete s[t]}function d(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(i,a);break}}function m(t){if(o)setTimeout(m,0,t);else{var e=s[t];if(e){o=!0;try{d(e)}finally{u(t),o=!1}}}}function p(){a=function(t){e.nextTick(function(){m(t)})}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function g(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&m(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(i){t.postMessage(e+i,"*")}}function v(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},a=function(e){t.port2.postMessage(e)}}function h(){var t=l.documentElement;a=function(e){var i=l.createElement("script");i.onreadystatechange=function(){m(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function y(){a=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,i("c8ba"),i("f28c"))},ab20:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row music-scrollCon"},[t.dom.login?a("Login"):t._e(),a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[a("img",{attrs:{alt:"Meason",src:i("333e"),width:"100"}})]),t._l(t.songList,function(e,n){return a("div",{key:e.id+n,staticClass:"col-xl-3 col-lg-3 col-md-4 col-sm-6"},[t.userData?a("a",{staticClass:"song-likes",attrs:{href:"#",title:"加入最愛"},domProps:{innerHTML:t._s(t.comLike(e.like))},on:{click:function(i){return i.preventDefault(),t.liked(e,n)}}}):a("a",{staticClass:"song-likes",attrs:{href:"#",title:"加入最愛"},on:{click:function(e){e.preventDefault(),t.dom.login=!0,t.dom.opened=!1}}},[a("i",{staticClass:"far fa-heart"})]),a("div",{staticClass:"music-con"},[a("div",{staticClass:"photo",class:{playing:t.player.id===e.id},style:{backgroundImage:"url("+e.cover+")"},on:{click:function(e){return t.togglePlay(n)}}},[a("img",{attrs:{src:i("1057"),width:"100%",alt:""}}),t._m(0,!0),a("p",{staticClass:"views"},[t._v(t._s(e.view)+" "),a("small",[t._v("瀏覽")])])]),a("div",{staticClass:"text"},[a("router-link",{attrs:{to:"/music/"+e.id,tag:"h3"}},[t._v(t._s(e.name))]),a("h4",{staticClass:"type"},[a("i",{staticClass:"fas fa-music"}),a("p",{staticClass:"type"},t._l(e.type,function(e){return a("span",{key:e},[t._v(t._s(e))])}),0)])],1),a("div",{staticClass:"artist"},[a("router-link",{attrs:{to:"/user",title:e.artist}},[a("i",{staticClass:"fas fa-user"}),t._v(" "+t._s(e.artist)+"\n        ")]),e.like?a("span",[t._v(t._s(e.like.length)+" 收藏")]):t._e()],1)])])}),a("div",{staticClass:"modal fade",attrs:{id:"filter-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.filterInput,expression:"tempDom.filterInput"}],staticClass:"form-control",attrs:{type:"text",placeholder:"♫ Search","aria-label":"","aria-describedby":"basic-addon1"},domProps:{value:t.tempDom.filterInput},on:{input:function(e){e.target.composing||t.$set(t.tempDom,"filterInput",e.target.value)}}})])])]),a("div",{staticClass:"row",attrs:{id:"instrumentItem"}},t._l(t.tempDom.filterItem,function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e,expression:"item"}],key:i,staticClass:"col-md-4 col-sm-4 col-6"},[a("div",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempDom.selectType,expression:"tempDom.selectType"}],attrs:{type:"radio",name:"radio",id:"radio"+i},domProps:{value:e,checked:t._q(t.tempDom.selectType,e)},on:{change:function(i){return t.$set(t.tempDom,"selectType",e)}}}),a("label",{attrs:{for:"radio"+i}},[t._v("\n                  "+t._s(e)+"\n                ")])])])}),0)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.filterData()}}},[t._v("確定")])])])])])],2)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"click"},[i("i",{staticClass:"far fa-play-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title"},[t._v("快速篩選")]),i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],s=(i("8615"),i("456d"),i("ac6a"),i("8aa5"),i("1157")),o=i.n(s),l=i("578a"),c=(i("5118"),{name:"AllSong",props:["userData"],data:function(){return{isLoading:!1,dom:{login:!1,opened:!1},player:{id:"",pause:!1},songList:[],tempDom:{deleteOpen:!1,filterInput:"",filterItem:["全部","編曲/作詞","COVER","搖滾","貝斯手","電子琴手","提琴樂手","電吉他手","木吉他手","爵士鼓手","鋼琴手","木箱鼓手","DJ","B-BOX夥伴","阿卡貝拉夥伴","長笛手","薩克斯風樂手","木管樂手","銅管樂手(法國號,小號,低音大號,長號等)","吹管類樂手(笛,蕭,嗩吶,笙)","彈拔類樂手(琵琶,箏,揚琴,中阮)","拉弦類樂手(胡)","打擊鼓手(大鼓,小軍鼓)","其他"]},tempData:{allData:[],firstPlay:!0,options:["全部","編曲/作詞","COVER","搖滾","貝斯手","電子琴手","提琴樂手","電吉他手","木吉他手","爵士鼓手","鋼琴手","木箱鼓手","DJ","B-BOX夥伴","阿卡貝拉夥伴","長笛手","薩克斯風樂手","木管樂手","銅管樂手(法國號,小號,低音大號,長號等)","吹管類樂手(笛,蕭,嗩吶,笙)","彈拔類樂手(琵琶,箏,揚琴,中阮)","拉弦類樂手(胡)","打擊鼓手(大鼓,小軍鼓)","其他"]}}},watch:{"tempDom.filterInput":{handler:function(t){var e=this;e.tempDom.filterItem=e.tempData.options.map(function(e,i,a){return-1!==e.indexOf(t)&&e})}}},components:{Login:l["a"]},methods:{togglePlay:function(t){var e=this,i=[];e.player.pause&&e.songList[t].id===e.player.id?(this.$bus.$emit("audio:pause"),e.player.pause=!1,e.player.id=""):e.tempData.firstPlay?(e.songList.forEach(function(t){i.push(t)}),i.unshift(e.songList[t]),i.splice(t+1,1),this.$bus.$emit("audio:list",i),e.player.pause=!0,e.tempData.firstPlay=!1):(this.$bus.$emit("audio:play",e.songList[t]),e.player.pause=!0)},getMusicData:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this),i="".concat("https://glacial-bayou-94392.herokuapp.com","/getPostData"),a="/music",n=null;e.isLoading=!0,e.$http.post(i,{url:a}).then(function(t){n=t.data,e.isLoading=!1}).then(function(t){n.forEach(function(t){t.like&&(t.like=Object.keys(t.like))})}).then(function(t){n.forEach(function(t){t.type&&(t.type=Object.values(t.type))})}).then(function(){t.$bus.$emit("audio:newList",n),e.tempData.allData=n,e.tempDom.selectType?e.filterData():e.songList=n}).catch(function(t){e.isLoading=!1})},comLike:function(t){var e=this,i=e.userData.uid,a="";return a=Array.isArray(t)&&-1!==t.indexOf(i)?'<i class="fas fa-heart"></i>':'<i class="far fa-heart"></i>',a},liked:function(t,e){var i=this,a=i.userData.uid;i.userData&&(t.like&&-1!==t.like.indexOf(a)?i.sendLikeAPI(t,"unlike"):i.sendLikeAPI(t,"likes"))},sendLikeAPI:function(t,e){var i=this,a="".concat("https://glacial-bayou-94392.herokuapp.com","/likeMusic"),n={method:e,userId:i.userData.uid,musicId:t.id,posterId:t.poster_uid};i.$http.post(a,{reqData:n}).then(function(t){t.data.success&&i.getMusicData()})},scrollEvent:function(){var t=document.querySelector(".music").scrollTop,e=o()(".music").height()||document.body.clientHeight,i=parseInt(t+e),a=parseInt(o()(".music-scrollCon").height(),10)+71;i===a&&console.log(i,a)},filterData:function(){var t=this;if("全部"!==t.tempDom.selectType){var e=t.tempData.allData.filter(function(e){return t.ArrIndexOf(e.type)});t.songList=e}else t.songList=t.tempData.allData},ArrIndexOf:function(t){var e=this;return-1!==t.indexOf(e.tempDom.selectType)}},created:function(){var t=this;t.getMusicData(),t.$bus.$on("current:id",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.player.id=e}),t.$bus.$on("current:pause",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.player.id="",t.player.pause=!1}),t.$bus.$on("close:login",function(e){t.dom.login=e}),t.$bus.$on("add:view",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.songList.forEach(function(i,a){i.id===e.id&&(t.songList[a].view=e.num)})})}}),r=c,u=(i("065a"),i("2877")),d=Object(u["a"])(r,a,n,!1,null,"57bbe627",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-5ace5021.6bd930b6.js.map